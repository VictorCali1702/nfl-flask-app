{% extends "base.html" %}
{% block content %}
<div class="team-results">
	<h2> {{ team_name }} - Last Games</h2>

	<!--New function-->
	<div class="team-navigation">
		<a href="{{ url_for('team_all_matches', team_key=search_query) }}" class="btn-small">All Season Games</a>
		<a href="{{ url_for('team_schedule', team_key=search_query) }}" class="btn-small">Upcoming Games</a>
		<a href="{{ url_for('search_team') }}" class="btn-small">Back to Search</a>
	</div>

	<a href="{{ url_for('index') }}" class="back-link">Back to Home</a>

	{% if games %}
	<div class="games-count">Found {{ games|length }} recent games</div>

	<table class="games-table">
		<tr>
			<th>Date</th>
			<th>Event</th>
			<th>Home Team</th>
			<th>Score</th>
			<th>Away Team</th>
			<th>League</th>
		</tr>
		{% for g in games %}
		<tr>
			<td>
				{{ g.dateEvent }}
			</td>
			<td>{{ g.strEvent or 'NFL Game' }}</td>
			<td>{{ g.strHomeTeam }}</td>
			<td>
				{% if g.intHomeScore is not none and g.intAwayScore is not none %}
				{{ g.intHomeScore }} - {{ g.intAwayScore }}
				{% else %}
					vs
				{% endif %}
			</td>
			<td>{{ g.strAwayTeam }}</td>
			<td>{{ g.strLeague or 'NFL'}}</td>
		</tr>
		{% endfor %}
	</table>
	{% else %}
	<div class="no-games">
		<p>No recent games found for {{ team_name }}</p>
	</div>
	{% endif %}
</div>
{% endblock %}